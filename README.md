# BankAccounts

Banking - это приложение для управления банковскими счетами. Оно предоставляет REST API для создания, получения, обновления и удаления счетов, а также для выполнения операций по внесению, снятию и переводу средств между счетами.

## Технологии

Проект разработан с использованием следующих технологий и инструментов:

- Java 17
- Spring Boot
- Spring Data JPA
- PostgreSQL
- Liquibase
- Hibernate
- Lombok
- MapStruct
- Maven

## Структура проекта

Проект имеет следующую структуру:

- `src/main/java/ru/nazimov/BankAccounts/controller` - содержит контроллеры для обработки HTTP-запросов и взаимодействия с сервисами.
- `src/main/java/ru/nazimov/BankAccounts/dto` - содержит классы DTO (Data Transfer Object) для передачи данных между слоями приложения.
- `src/main/java/ru/nazimov/BankAccounts/dto/validation` - содержит интерфейсы для группировки валидации DTO в зависимости от операции.
- `src/main/java/ru/nazimov/BankAccounts/exception` - содержит классы исключений, связанных с банковскими счетами.
- `src/main/java/ru/nazimov/BankAccounts/mappers` - содержит мапперы для преобразования между сущностями и DTO.
- `src/main/java/ru/nazimov/BankAccounts/model` - содержит классы моделей, представляющие счета в базе данных.
- `src/main/java/ru/nazimov/BankAccounts/repository` - содержит интерфейсы репозиториев для выполнения операций с базой данных.
- `src/main/java/ru/nazimov/BankAccounts/service` - содержит сервисы для выполнения операций с банковскими счетами.
- `src/main/resources` - содержит файлы конфигурации, миграции базы данных и другие ресурсы проекта.

## Запуск проекта

Для запуска проекта выполните следующие шаги:

1. Склонируйте репозиторий проекта.
2. В файле `src/main/resources/application.yaml` укажите настройки подключения к базе данных.
3. Запустите команду `mvn spring-boot:run` из корневой директории проекта.

После успешного запуска проект будет доступен по адресу `http://localhost:8080`.

## Использование API

API проекта предоставляет следующие возможности:

### Создание нового счета

- URL: `/accounts`
- Метод: `POST`
- Тело запроса: JSON
```json
{
  "name": "Имя клиента",
  "pin": "ПИН-код"
}
```
- Тело ответа: JSON
```json
{
  "name": "Имя клиента",
  "balance": "баланс счета"
}
```

### Получение счета по идентификатору

- URL: `/accounts/{id}`
- Метод: `GET`
- Параметры запроса: `id` - идентификатор счета (UUID)
- Тело ответа: JSON
```json
{
  "name": "Имя клиента",
  "balance": "баланс счета"
}
```

### Получение всех счетов

- URL: `/accounts`
- Метод: `GET`
- Тело ответа: JSON
```json
[
  {
    "name": "Имя клиента",
    "balance": "баланс счета"
  },
  ...
]
```

### Получение счетов с балансом не менее указанного

- URL: `/accounts?balance={balance}`
- Метод: `GET`
- Параметры запроса: `balance` - минимальный баланс счета
- Тело ответа: JSON
```json
[
  {
    "name": "Имя клиента",
    "balance": "баланс счета"
  },
  ...
]
```

### Внесение средств на счет

- URL: `/accounts/deposit`
- Метод: `PATCH`
- Тело запроса: JSON
```json
{
  "name": "Имя клиента",
  "pin": "ПИН-код",
  "amount": "сумма депозита"
}
```
- Тело ответа: JSON
```json
{
  "name": "Имя клиента",
  "balance": "новый баланс счета после внесения"
}
```

### Снятие средств со счета

- URL: `/accounts/withdraw`
- Метод: `PATCH`
- Тело запроса: JSON
```json
{
  "name": "Имя клиента",
  "pin": "ПИН-код",
  "amount": "сумма снятия"
}
```
- Тело ответа: JSON
```json
{
  "name": "Имя клиента",
  "balance": "новый баланс счета после снятия"
}
```

### Перевод средств между счетами

- URL: `/accounts/transfer`
- Метод: `PATCH`
- Тело запроса: JSON
```json
{
  "name": "Имя клиента",
  "pin": "ПИН-код",
  "nameToTransfer": "Имя клиента для перевода",
  "amount": "сумма перевода"
}
```
- Тело ответа: JSON
```json
{
  "name": "Имя клиента",
  "balance": "новый баланс счета после перевода"
}
```

### Удаление счета

- URL: `/accounts`
- Метод: `DELETE`
- Тело запроса: JSON
```json
{
  "name": "Имя клиента",
  "pin": "ПИН-код"
}
```
- Тело ответа: JSON
```json
"Счет успешно удален"
```